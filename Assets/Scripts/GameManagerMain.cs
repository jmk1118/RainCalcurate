using System.Collections;
using UnityEngine;
using UnityEngine.UI;

public class GameManagerMain : MonoBehaviour
{
    [SerializeField] GameObject GameManager; // 게임 매니저 오브젝트
    [SerializeField] Text hpText; // hp 줄어드는 시스템을 개발하자
    [SerializeField] Text pointText;
    int nowtime;
    int nowpoint;
    int HP;
    Coroutine timePlay;

    private void OnEnable()
    {
        nowtime = 0;
        nowpoint = 0;
        HP = 10;
        timePlay = StartCoroutine("TimePlay");
        hpText.text = "남은 체력 : 10점";
        pointText.text = "점수 : 0점";
    }

    private void OnDisable()
    {
        StopCoroutine(timePlay);
    }

    IEnumerator TimePlay()
    {
        while (true)
        {
            nowtime++;
            yield return new WaitForSeconds(1.0f);
        }
    }

    public void GetPoint()
    {
        nowpoint += 10;
        pointText.text = "점수 : " + nowpoint.ToString() + "점";
    }

    public void LosePoint()
    {
        HP--;
        hpText.text = "남은 체력 : " + HP;

        if(HP <= 0)
        {
            GameManager.GetComponent<GameManager>().GameOver(nowpoint);
        }
    }
}
